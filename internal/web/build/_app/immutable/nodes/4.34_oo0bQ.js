import{e as j,a as d,f as c,s as p,t as pt}from"../chunks/BALovzVN.js";import{i as vt}from"../chunks/DVv75SxZ.js";import{p as xt,o as mt,a as ft,e as ut,s as i,b as n,$ as yt,c as a,r as e,g as s,m as f,t as E,u as gt,d as bt}from"../chunks/vzSSS4xY.js";import{i as B}from"../chunks/CPMPC3H7.js";import{e as G,i as H,s as ht}from"../chunks/CW9yTeWy.js";import{h as _t,a as I}from"../chunks/DgVZwyRH.js";import{s as wt}from"../chunks/CRF_Y0HF.js";var kt=c('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"></div></div>'),Ct=c('<div class="card p-4 bg-red-50 border-red-200"><p class="text-red-700"> </p></div>'),At=c('<div class="card p-12 text-center"><div class="text-4xl mb-4">ðŸ”‘</div> <h3 class="text-lg font-medium text-gray-900">No credentials yet</h3> <p class="mt-2 text-sm text-gray-500">Add your first credential to get started.</p> <button class="btn btn-primary mt-4">Add Credential</button></div>'),Dt=c("<span> <!></span>"),$t=c('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm font-medium text-gray-900"> </div> <div class="text-xs text-gray-500"> </div></td><td class="px-6 py-4 whitespace-nowrap"><span class="px-2 py-1 text-xs font-medium bg-gray-100 text-gray-700 rounded"> </span></td><td class="px-6 py-4"><div class="flex flex-wrap gap-1"></div></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"> </td><td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"><a class="text-primary-600 hover:text-primary-900 mr-4">Edit</a> <button class="text-red-600 hover:text-red-900">Delete</button></td></tr>'),jt=c('<div class="card overflow-hidden"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Service</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Scopes</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Updated</th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div>'),Et=c('<div class="space-y-6"><div class="flex items-center justify-between"><h1 class="text-2xl font-bold text-gray-900">Credentials</h1> <button class="btn btn-primary">Add Credential</button></div> <!></div>');function Lt(J,K){xt(K,!1);let u=f([]),y=f(!0),v=f(""),M=f(!1);mt(async()=>{await S()});async function S(){n(y,!0),n(v,"");try{n(u,await I.listCredentials())}catch(t){n(v,t instanceof Error?t.message:"Failed to load credentials")}finally{n(y,!1)}}async function P(t){if(confirm(`Delete credential "${t}"? This cannot be undone.`))try{await I.deleteCredential(t),await S()}catch(r){alert(r instanceof Error?r.message:"Failed to delete")}}function Q(t){return new Date(t).toLocaleDateString()}vt();var g=Et();_t("bcpq9l",t=>{ut(()=>{yt.title="Credentials - OCM"})});var b=a(g),R=i(a(b),2);e(b);var V=i(b,2);{var W=t=>{var r=kt();d(t,r)},X=t=>{var r=Ct(),o=a(r),x=a(o,!0);e(o),e(r),E(()=>p(x,s(v))),d(t,r)},Y=t=>{var r=At(),o=i(a(r),6);e(r),j("click",o,()=>n(M,!0)),d(t,r)},Z=t=>{var r=jt(),o=a(r),x=i(a(o));G(x,5,()=>s(u),H,(tt,l)=>{var h=$t(),_=a(h),w=a(_),et=a(w,!0);e(w);var F=i(w,2),at=a(F,!0);e(F),e(_);var k=i(_),N=a(k),rt=a(N,!0);e(N),e(k);var C=i(k),O=a(C);G(O,5,()=>Object.entries(s(l).scopes),H,(D,dt)=>{var L=gt(()=>bt(s(dt),2));let ot=()=>s(L)[0],U=()=>s(L)[1];var m=Dt(),z=a(m),lt=i(z);{var nt=$=>{var ct=pt("(approval)");d($,ct)};B(lt,$=>{U().permanent||$(nt)})}e(m),E(()=>{wt(m,1,`px-2 py-0.5 text-xs rounded ${U().permanent?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`),p(z,`${ot()??""} `)}),d(D,m)}),e(O),e(C);var A=i(C),st=a(A,!0);e(A);var T=i(A),q=a(T),it=i(q,2);e(T),e(h),E(D=>{p(et,s(l).displayName),p(at,s(l).service),p(rt,s(l).type),p(st,D),ht(q,"href",`/credentials/${s(l).service??""}`)},[()=>Q(s(l).updatedAt)]),j("click",it,()=>P(s(l).service)),d(tt,h)}),e(x),e(o),e(r),d(t,r)};B(V,t=>{s(y)?t(W):s(v)?t(X,1):s(u).length===0?t(Y,2):t(Z,!1)})}e(g),j("click",R,()=>n(M,!0)),d(J,g),ft()}export{Lt as component};
