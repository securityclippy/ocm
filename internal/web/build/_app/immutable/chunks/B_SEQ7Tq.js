import{s as o,a as R,e as N,f as k}from"./-E6DMqgS.js";import{i as aa}from"./BAracPGd.js";import{p as ta,w as ea,s as l,c as s,r as e,t as O,g as a,u as r,a as sa,m as M,b as u}from"./Buijd9Qj.js";import{e as S,i as z,s as ra}from"./oVlz52KM.js";import{b as ia}from"./CXo1EzCa.js";import{p as na}from"./Y6DjFxan.js";import{a as B}from"./DE3KHp1P.js";var oa=k("<option> </option>"),la=k('<div class="p-6"><div class="flex items-start justify-between"><div class="flex-1"><div class="flex items-center gap-2"><span class="text-lg font-medium text-gray-900"> </span> <span class="px-2 py-0.5 text-xs font-medium bg-orange-100 text-orange-700 rounded"> </span></div> <p class="mt-1 text-sm text-gray-600"> </p> <p class="mt-1 text-xs text-gray-400"> </p></div> <div class="flex items-center gap-2"><select class="text-sm border-gray-300 rounded-md focus:ring-primary-500 focus:border-primary-500"></select> <button class="btn btn-success"> </button> <button class="btn btn-danger"> </button></div></div></div>'),da=k('<div class="card"><div class="px-6 py-4 border-b border-gray-200"><h2 class="text-lg font-semibold text-gray-900">Pending Requests</h2></div> <div class="divide-y divide-gray-200"></div></div>');function ba(C,E){ta(E,!1);let G=na(E,"requests",8);const P=ea();let d=M(null),v=M(null),b=M("30m");const H=[{value:"15m",label:"15 minutes"},{value:"30m",label:"30 minutes"},{value:"1h",label:"1 hour"},{value:"2h",label:"2 hours"},{value:"4h",label:"4 hours"}];async function I(i){u(d,i);try{await B.approveRequest(i,a(b)),P("action")}catch(t){alert(t instanceof Error?t.message:"Failed to approve")}finally{u(d,null)}}async function J(i){u(v,i);try{await B.denyRequest(i),P("action")}catch(t){alert(t instanceof Error?t.message:"Failed to deny")}finally{u(v,null)}}function K(i){return new Date(i).toLocaleString()}function Q(i){const t=Math.floor((Date.now()-new Date(i).getTime())/1e3);return t<60?`${t}s ago`:t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:`${Math.floor(t/86400)}d ago`}aa();var x=da(),T=l(s(x),2);S(T,5,G,z,(i,t)=>{var _=la(),$=s(_),y=s($),h=s(y),w=s(h),U=s(w,!0);e(w);var F=l(w,2),V=s(F,!0);e(F),e(h);var D=l(h,2),W=s(D,!0);e(D);var A=l(D,2),X=s(A);e(A),e(y);var j=l(y,2),f=s(j);S(f,5,()=>H,z,(p,n)=>{var m=oa(),q=s(m,!0);e(m);var L={};O(()=>{o(q,(a(n),r(()=>a(n).label))),L!==(L=(a(n),r(()=>a(n).value)))&&(m.value=(m.__value=(a(n),r(()=>a(n).value)))??"")}),R(p,m)}),e(f);var c=l(f,2),Y=s(c,!0);e(c);var g=l(c,2),Z=s(g,!0);e(g),e(j),e($),e(_),O((p,n)=>{o(U,(a(t),r(()=>a(t).service))),o(V,(a(t),r(()=>a(t).scope))),o(W,(a(t),r(()=>a(t).reason||"No reason provided"))),ra(A,"title",p),o(X,`Requested ${n??""}`),c.disabled=(a(d),a(t),r(()=>a(d)===a(t).id)),o(Y,(a(d),a(t),r(()=>a(d)===a(t).id?"Approving...":"Approve"))),g.disabled=(a(v),a(t),r(()=>a(v)===a(t).id)),o(Z,(a(v),a(t),r(()=>a(v)===a(t).id?"Denying...":"Deny")))},[()=>(a(t),r(()=>K(a(t).requestedAt))),()=>(a(t),r(()=>Q(a(t).requestedAt)))]),ia(f,()=>a(b),p=>u(b,p)),N("click",c,()=>I(a(t).id)),N("click",g,()=>J(a(t).id)),R(i,_)}),e(T),e(x),R(C,x),sa()}export{ba as P};
